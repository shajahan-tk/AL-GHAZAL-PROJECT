import{r as s,ar as Ke,aq as ft}from"./index-CA7vLNFI.js";import{y as dt,z as mt,B as vt,C as pt,D as ue}from"./Views-DLdkzVCz.js";const mn=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&typeof n=="object"&&(n.current=t)})};function ie(){return typeof window<"u"}function We(e){return He(e)?(e.nodeName||"").toLowerCase():"#document"}function X(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gt(e){var t;return(t=(He(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function He(e){return ie()?e instanceof Node||e instanceof X(e).Node:!1}function _(e){return ie()?e instanceof Element||e instanceof X(e).Element:!1}function se(e){return ie()?e instanceof HTMLElement||e instanceof X(e).HTMLElement:!1}function ge(e){return!ie()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof X(e).ShadowRoot}function bt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ae(e){return["html","body","#document"].includes(We(e))}function ht(e){return X(e).getComputedStyle(e)}function Et(e){if(We(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ge(e)&&e.host||gt(e);return ge(t)?t.host:t}function be(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function q(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&ge(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Ve(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Ye(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Rt(e){return wt()?!1:!xe()&&e.width===0&&e.height===0||xe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function je(){return/apple/i.test(navigator.vendor)}function xe(){const e=/android/i;return e.test(Ve())||e.test(Ye())}function yt(){return Ve().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function wt(){return Ye().includes("jsdom/")}function z(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function Ct(e){return"nativeEvent"in e}function xt(e){return e.matches("html,body")}function j(e){return(e==null?void 0:e.ownerDocument)||document}function ce(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function U(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Tt="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Ue(e){return se(e)&&e.matches(Tt)}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var St=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],he=St.join(","),qe=typeof Element>"u",J=qe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ne=!qe&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},re=function e(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),a=o===""||o==="true",i=a||n&&t&&e(t.parentNode);return i},Pt=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},Mt=function(t,n,r){if(re(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(he));return n&&J.call(t,he)&&o.unshift(t),o=o.filter(r),o},It=function e(t,n,r){for(var o=[],a=Array.from(t);a.length;){var i=a.shift();if(!re(i,!1))if(i.tagName==="SLOT"){var u=i.assignedElements(),f=u.length?u:i.children,l=e(f,!0,r);r.flatten?o.push.apply(o,l):o.push({scopeParent:i,candidates:l})}else{var p=J.call(i,he);p&&r.filter(i)&&(n||!t.includes(i))&&o.push(i);var g=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),R=!re(g,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(g&&R){var d=e(g===!0?i.children:g.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:i,candidates:d})}else a.unshift.apply(a,i.children)}}return o},Xe=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Ge=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Pt(t))&&!Xe(t)?0:t.tabIndex},kt=function(t,n){var r=Ge(t);return r<0&&n&&!Xe(t)?0:r},Dt=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},Ze=function(t){return t.tagName==="INPUT"},Ot=function(t){return Ze(t)&&t.type==="hidden"},Lt=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},At=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},Nt=function(t){if(!t.name)return!0;var n=t.form||ne(t),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var a=At(o,t.form);return!a||a===t},Ft=function(t){return Ze(t)&&t.type==="radio"},_t=function(t){return Ft(t)&&!Nt(t)},$t=function(t){var n,r=t&&ne(t),o=(n=r)===null||n===void 0?void 0:n.host,a=!1;if(r&&r!==t){var i,u,f;for(a=!!((i=o)!==null&&i!==void 0&&(u=i.ownerDocument)!==null&&u!==void 0&&u.contains(o)||t!=null&&(f=t.ownerDocument)!==null&&f!==void 0&&f.contains(t));!a&&o;){var l,p,g;r=ne(o),o=(l=r)===null||l===void 0?void 0:l.host,a=!!((p=o)!==null&&p!==void 0&&(g=p.ownerDocument)!==null&&g!==void 0&&g.contains(o))}}return a},Te=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},Bt=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var a=J.call(t,"details>summary:first-of-type"),i=a?t.parentElement:t;if(J.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var u=t;t;){var f=t.parentElement,l=ne(t);if(f&&!f.shadowRoot&&o(f)===!0)return Te(t);t.assignedSlot?t=t.assignedSlot:!f&&l!==t.ownerDocument?t=l.host:t=f}t=u}if($t(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Te(t);return!1},Kt=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return J.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},Wt=function(t,n){return!(n.disabled||re(n)||Ot(n)||Bt(n,t)||Lt(n)||Kt(n))},Se=function(t,n){return!(_t(n)||Ge(n)<0||!Wt(t,n))},Ht=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Vt=function e(t){var n=[],r=[];return t.forEach(function(o,a){var i=!!o.scopeParent,u=i?o.scopeParent:o,f=kt(u,i),l=i?e(o.candidates):u;f===0?i?n.push.apply(n,l):n.push(u):r.push({documentOrder:a,tabIndex:f,item:o,isScope:i,content:l})}),r.sort(Dt).reduce(function(o,a){return a.isScope?o.push.apply(o,a.content):o.push(a.content),o},[]).concat(n)},ze=function(t,n){n=n||{};var r;return n.getShadowRoot?r=It([t],n.includeContainer,{filter:Se.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Ht}):r=Mt(t,n.includeContainer,Se.bind(null,n)),Vt(r)},te=typeof document<"u"?s.useLayoutEffect:s.useEffect;function oe(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!oe(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!oe(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Je(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Pe(e,t){const n=Je(e);return Math.round(t*n)/n}function le(e){const t=s.useRef(e);return te(()=>{t.current=e}),t}function Yt(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:u=!0,whileElementsMounted:f,open:l}=e,[p,g]=s.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[R,d]=s.useState(r);oe(R,r)||d(r);const[h,c]=s.useState(null),[w,T]=s.useState(null),S=s.useCallback(m=>{m!==D.current&&(D.current=m,c(m))},[]),x=s.useCallback(m=>{m!==O.current&&(O.current=m,T(m))},[]),M=a||h,k=i||w,D=s.useRef(null),O=s.useRef(null),K=s.useRef(p),L=f!=null,W=le(f),N=le(o),$=le(l),A=s.useCallback(()=>{if(!D.current||!O.current)return;const m={placement:t,strategy:n,middleware:R};N.current&&(m.platform=N.current),dt(D.current,O.current,m).then(v=>{const C={...v,isPositioned:$.current!==!1};F.current&&!oe(K.current,C)&&(K.current=C,Ke.flushSync(()=>{g(C)}))})},[R,t,n,N,$]);te(()=>{l===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,g(m=>({...m,isPositioned:!1})))},[l]);const F=s.useRef(!1);te(()=>(F.current=!0,()=>{F.current=!1}),[]),te(()=>{if(M&&(D.current=M),k&&(O.current=k),M&&k){if(W.current)return W.current(M,k,A);A()}},[M,k,A,W,L]);const y=s.useMemo(()=>({reference:D,floating:O,setReference:S,setFloating:x}),[S,x]),P=s.useMemo(()=>({reference:M,floating:k}),[M,k]),b=s.useMemo(()=>{const m={position:n,left:0,top:0};if(!P.floating)return m;const v=Pe(P.floating,p.x),C=Pe(P.floating,p.y);return u?{...m,transform:"translate("+v+"px, "+C+"px)",...Je(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:v,top:C}},[n,u,P.floating,p.x,p.y]);return s.useMemo(()=>({...p,update:A,refs:y,elements:P,floatingStyles:b}),[p,A,y,P,b])}const vn=(e,t)=>({...mt(e),options:[e,t]}),pn=(e,t)=>({...vt(e),options:[e,t]}),gn=(e,t)=>({...pt(e),options:[e,t]}),Qe={...ft},jt=Qe.useInsertionEffect,Ut=jt||(e=>e());function Y(e){const t=s.useRef(()=>{});return Ut(()=>{t.current=e}),s.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}var H=typeof document<"u"?s.useLayoutEffect:s.useEffect;function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}let Me=!1,qt=0;const Ie=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+qt++;function Xt(){const[e,t]=s.useState(()=>Me?Ie():void 0);return H(()=>{e==null&&t(Ie())},[]),s.useEffect(()=>{Me=!0},[]),e}const Gt=Qe.useId,Re=Gt||Xt;function Zt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(o=>o!==n))||[])}}}const zt=s.createContext(null),Jt=s.createContext(null),ye=()=>{var e;return((e=s.useContext(zt))==null?void 0:e.id)||null},we=()=>s.useContext(Jt);function Q(e){return"data-floating-ui-"+e}function fe(e){const t=s.useRef(e);return H(()=>{t.current=e}),t}const ke=Q("safe-polygon");function de(e,t,n){return n&&!z(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function bn(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:a,elements:i}=e,{enabled:u=!0,delay:f=0,handleClose:l=null,mouseOnly:p=!1,restMs:g=0,move:R=!0}=t,d=we(),h=ye(),c=fe(l),w=fe(f),T=fe(n),S=s.useRef(),x=s.useRef(-1),M=s.useRef(),k=s.useRef(-1),D=s.useRef(!0),O=s.useRef(!1),K=s.useRef(()=>{}),L=s.useRef(!1),W=s.useCallback(()=>{var b;const m=(b=o.current.openEvent)==null?void 0:b.type;return(m==null?void 0:m.includes("mouse"))&&m!=="mousedown"},[o]);s.useEffect(()=>{if(!u)return;function b(m){let{open:v}=m;v||(clearTimeout(x.current),clearTimeout(k.current),D.current=!0,L.current=!1)}return a.on("openchange",b),()=>{a.off("openchange",b)}},[u,a]),s.useEffect(()=>{if(!u||!c.current||!n)return;function b(v){W()&&r(!1,v,"hover")}const m=j(i.floating).documentElement;return m.addEventListener("mouseleave",b),()=>{m.removeEventListener("mouseleave",b)}},[i.floating,n,r,u,c,W]);const N=s.useCallback(function(b,m,v){m===void 0&&(m=!0),v===void 0&&(v="hover");const C=de(w.current,"close",S.current);C&&!M.current?(clearTimeout(x.current),x.current=window.setTimeout(()=>r(!1,b,v),C)):m&&(clearTimeout(x.current),r(!1,b,v))},[w,r]),$=Y(()=>{K.current(),M.current=void 0}),A=Y(()=>{if(O.current){const b=j(i.floating).body;b.style.pointerEvents="",b.removeAttribute(ke),O.current=!1}}),F=Y(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);s.useEffect(()=>{if(!u)return;function b(E){if(clearTimeout(x.current),D.current=!1,p&&!z(S.current)||g>0&&!de(w.current,"open"))return;const I=de(w.current,"open",S.current);I?x.current=window.setTimeout(()=>{T.current||r(!0,E,"hover")},I):n||r(!0,E,"hover")}function m(E){if(F())return;K.current();const I=j(i.floating);if(clearTimeout(k.current),L.current=!1,c.current&&o.current.floatingContext){n||clearTimeout(x.current),M.current=c.current({...o.current.floatingContext,tree:d,x:E.clientX,y:E.clientY,onClose(){A(),$(),F()||N(E,!0,"safe-polygon")}});const ee=M.current;I.addEventListener("mousemove",ee),K.current=()=>{I.removeEventListener("mousemove",ee)};return}(S.current==="touch"?!q(i.floating,E.relatedTarget):!0)&&N(E)}function v(E){F()||o.current.floatingContext&&(c.current==null||c.current({...o.current.floatingContext,tree:d,x:E.clientX,y:E.clientY,onClose(){A(),$(),F()||N(E)}})(E))}if(_(i.domReference)){var C;const E=i.domReference;return n&&E.addEventListener("mouseleave",v),(C=i.floating)==null||C.addEventListener("mouseleave",v),R&&E.addEventListener("mousemove",b,{once:!0}),E.addEventListener("mouseenter",b),E.addEventListener("mouseleave",m),()=>{var I;n&&E.removeEventListener("mouseleave",v),(I=i.floating)==null||I.removeEventListener("mouseleave",v),R&&E.removeEventListener("mousemove",b),E.removeEventListener("mouseenter",b),E.removeEventListener("mouseleave",m)}}},[i,u,e,p,g,R,N,$,A,r,n,T,d,w,c,o,F]),H(()=>{var b;if(u&&n&&(b=c.current)!=null&&b.__options.blockPointerEvents&&W()){O.current=!0;const v=i.floating;if(_(i.domReference)&&v){var m;const C=j(i.floating).body;C.setAttribute(ke,"");const E=i.domReference,I=d==null||(m=d.nodesRef.current.find(G=>G.id===h))==null||(m=m.context)==null?void 0:m.elements.floating;return I&&(I.style.pointerEvents=""),C.style.pointerEvents="none",E.style.pointerEvents="auto",v.style.pointerEvents="auto",()=>{C.style.pointerEvents="",E.style.pointerEvents="",v.style.pointerEvents=""}}}},[u,n,h,i,d,c,W]),H(()=>{n||(S.current=void 0,L.current=!1,$(),A())},[n,$,A]),s.useEffect(()=>()=>{$(),clearTimeout(x.current),clearTimeout(k.current),A()},[u,i.domReference,$,A]);const y=s.useMemo(()=>{function b(m){S.current=m.pointerType}return{onPointerDown:b,onPointerEnter:b,onMouseMove(m){const{nativeEvent:v}=m;function C(){!D.current&&!T.current&&r(!0,v,"hover")}p&&!z(S.current)||n||g===0||L.current&&m.movementX**2+m.movementY**2<2||(clearTimeout(k.current),S.current==="touch"?C():(L.current=!0,k.current=window.setTimeout(C,g)))}}},[p,r,n,T,g]),P=s.useMemo(()=>({onMouseEnter(){clearTimeout(x.current)},onMouseLeave(b){F()||N(b.nativeEvent,!1)}}),[N,F]);return s.useMemo(()=>u?{reference:y,floating:P}:{},[u,y,P])}function me(e,t){let n=e.filter(o=>{var a;return o.parentId===t&&((a=o.context)==null?void 0:a.open)}),r=n;for(;r.length;)r=e.filter(o=>{var a;return(a=r)==null?void 0:a.some(i=>{var u;return o.parentId===i.id&&((u=o.context)==null?void 0:u.open)})}),n=n.concat(r);return n}const et=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function tt(e,t){const n=ze(e,et());t==="prev"&&n.reverse();const r=n.indexOf(be(j(e)));return n.slice(r+1)[0]}function Qt(){return tt(document.body,"next")}function en(){return tt(document.body,"prev")}function ve(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!q(n,r)}function tn(e){ze(e,et()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function De(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const nt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let nn;function Oe(e){e.key==="Tab"&&(e.target,clearTimeout(nn))}const Le=s.forwardRef(function(t,n){const[r,o]=s.useState();H(()=>(je()&&o("button"),document.addEventListener("keydown",Oe),()=>{document.removeEventListener("keydown",Oe)}),[]);const a={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Q("focus-guard")]:"",style:nt};return s.createElement("span",Ee({},t,a))}),rt=s.createContext(null),Ae=Q("portal");function rn(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Re(),o=on(),[a,i]=s.useState(null),u=s.useRef(null);return H(()=>()=>{a==null||a.remove(),queueMicrotask(()=>{u.current=null})},[a]),H(()=>{if(!r||u.current)return;const f=t?document.getElementById(t):null;if(!f)return;const l=document.createElement("div");l.id=r,l.setAttribute(Ae,""),f.appendChild(l),u.current=l,i(l)},[t,r]),H(()=>{if(n===null||!r||u.current)return;let f=n||(o==null?void 0:o.portalNode);f&&!_(f)&&(f=f.current),f=f||document.body;let l=null;t&&(l=document.createElement("div"),l.id=t,f.appendChild(l));const p=document.createElement("div");p.id=r,p.setAttribute(Ae,""),f=l||f,f.appendChild(p),u.current=p,i(p)},[t,n,r,o]),a}function hn(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,a=rn({id:n,root:r}),[i,u]=s.useState(null),f=s.useRef(null),l=s.useRef(null),p=s.useRef(null),g=s.useRef(null),R=i==null?void 0:i.modal,d=i==null?void 0:i.open,h=!!i&&!i.modal&&i.open&&o&&!!(r||a);return s.useEffect(()=>{if(!a||!o||R)return;function c(w){a&&ve(w)&&(w.type==="focusin"?De:tn)(a)}return a.addEventListener("focusin",c,!0),a.addEventListener("focusout",c,!0),()=>{a.removeEventListener("focusin",c,!0),a.removeEventListener("focusout",c,!0)}},[a,o,R]),s.useEffect(()=>{a&&(d||De(a))},[d,a]),s.createElement(rt.Provider,{value:s.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:f,afterOutsideRef:l,beforeInsideRef:p,afterInsideRef:g,portalNode:a,setFocusManagerState:u}),[o,a])},h&&a&&s.createElement(Le,{"data-type":"outside",ref:f,onFocus:c=>{if(ve(c,a)){var w;(w=p.current)==null||w.focus()}else{const T=en()||(i==null?void 0:i.refs.domReference.current);T==null||T.focus()}}}),h&&a&&s.createElement("span",{"aria-owns":a.id,style:nt}),a&&Ke.createPortal(t,a),h&&a&&s.createElement(Le,{"data-type":"outside",ref:l,onFocus:c=>{if(ve(c,a)){var w;(w=g.current)==null||w.focus()}else{const T=Qt()||(i==null?void 0:i.refs.domReference.current);T==null||T.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,c.nativeEvent,"focus-out"))}}}))}const on=()=>s.useContext(rt),sn="data-floating-ui-focusable";function Ne(e){return se(e.target)&&e.target.tagName==="BUTTON"}function Fe(e){return Ue(e)}function En(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:a}}=e,{enabled:i=!0,event:u="click",toggle:f=!0,ignoreMouse:l=!1,keyboardHandlers:p=!0,stickIfOpen:g=!0}=t,R=s.useRef(),d=s.useRef(!1),h=s.useMemo(()=>({onPointerDown(c){R.current=c.pointerType},onMouseDown(c){const w=R.current;c.button===0&&u!=="click"&&(z(w,!0)&&l||(n&&f&&(!(o.current.openEvent&&g)||o.current.openEvent.type==="mousedown")?r(!1,c.nativeEvent,"click"):(c.preventDefault(),r(!0,c.nativeEvent,"click"))))},onClick(c){const w=R.current;if(u==="mousedown"&&R.current){R.current=void 0;return}z(w,!0)&&l||(n&&f&&(!(o.current.openEvent&&g)||o.current.openEvent.type==="click")?r(!1,c.nativeEvent,"click"):r(!0,c.nativeEvent,"click"))},onKeyDown(c){R.current=void 0,!(c.defaultPrevented||!p||Ne(c))&&(c.key===" "&&!Fe(a)&&(c.preventDefault(),d.current=!0),c.key==="Enter"&&r(!(n&&f),c.nativeEvent,"click"))},onKeyUp(c){c.defaultPrevented||!p||Ne(c)||Fe(a)||c.key===" "&&d.current&&(d.current=!1,r(!(n&&f),c.nativeEvent,"click"))}}),[o,a,u,l,p,r,n,g,f]);return s.useMemo(()=>i?{reference:h}:{},[i,h])}const un={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},an={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},_e=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Rn(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:a}=e,{enabled:i=!0,escapeKey:u=!0,outsidePress:f=!0,outsidePressEvent:l="pointerdown",referencePress:p=!1,referencePressEvent:g="pointerdown",ancestorScroll:R=!1,bubbles:d,capture:h}=t,c=we(),w=Y(typeof f=="function"?f:()=>!1),T=typeof f=="function"?w:f,S=s.useRef(!1),x=s.useRef(!1),{escapeKey:M,outsidePress:k}=_e(d),{escapeKey:D,outsidePress:O}=_e(h),K=s.useRef(!1),L=Y(y=>{var P;if(!n||!i||!u||y.key!=="Escape"||K.current)return;const b=(P=a.current.floatingContext)==null?void 0:P.nodeId,m=c?me(c.nodesRef.current,b):[];if(!M&&(y.stopPropagation(),m.length>0)){let v=!0;if(m.forEach(C=>{var E;if((E=C.context)!=null&&E.open&&!C.context.dataRef.current.__escapeKeyBubbles){v=!1;return}}),!v)return}r(!1,Ct(y)?y.nativeEvent:y,"escape-key")}),W=Y(y=>{var P;const b=()=>{var m;L(y),(m=U(y))==null||m.removeEventListener("keydown",b)};(P=U(y))==null||P.addEventListener("keydown",b)}),N=Y(y=>{var P;const b=S.current;S.current=!1;const m=x.current;if(x.current=!1,l==="click"&&m||b||typeof T=="function"&&!T(y))return;const v=U(y),C="["+Q("inert")+"]",E=j(o.floating).querySelectorAll(C);let I=_(v)?v:null;for(;I&&!ae(I);){const B=Et(I);if(ae(B)||!_(B))break;I=B}if(E.length&&_(v)&&!xt(v)&&!q(v,o.floating)&&Array.from(E).every(B=>!q(I,B)))return;if(se(v)&&F){const B=ae(v),V=ht(v),Z=/auto|scroll/,ot=B||Z.test(V.overflowX),it=B||Z.test(V.overflowY),st=ot&&v.clientWidth>0&&v.scrollWidth>v.clientWidth,ut=it&&v.clientHeight>0&&v.scrollHeight>v.clientHeight,at=V.direction==="rtl",ct=ut&&(at?y.offsetX<=v.offsetWidth-v.clientWidth:y.offsetX>v.clientWidth),lt=st&&y.offsetY>v.clientHeight;if(ct||lt)return}const G=(P=a.current.floatingContext)==null?void 0:P.nodeId,ee=c&&me(c.nodesRef.current,G).some(B=>{var V;return ce(y,(V=B.context)==null?void 0:V.elements.floating)});if(ce(y,o.floating)||ce(y,o.domReference)||ee)return;const Ce=c?me(c.nodesRef.current,G):[];if(Ce.length>0){let B=!0;if(Ce.forEach(V=>{var Z;if((Z=V.context)!=null&&Z.open&&!V.context.dataRef.current.__outsidePressBubbles){B=!1;return}}),!B)return}r(!1,y,"outside-press")}),$=Y(y=>{var P;const b=()=>{var m;N(y),(m=U(y))==null||m.removeEventListener(l,b)};(P=U(y))==null||P.addEventListener(l,b)});s.useEffect(()=>{if(!n||!i)return;a.current.__escapeKeyBubbles=M,a.current.__outsidePressBubbles=k;let y=-1;function P(E){r(!1,E,"ancestor-scroll")}function b(){window.clearTimeout(y),K.current=!0}function m(){y=window.setTimeout(()=>{K.current=!1},bt()?5:0)}const v=j(o.floating);u&&(v.addEventListener("keydown",D?W:L,D),v.addEventListener("compositionstart",b),v.addEventListener("compositionend",m)),T&&v.addEventListener(l,O?$:N,O);let C=[];return R&&(_(o.domReference)&&(C=ue(o.domReference)),_(o.floating)&&(C=C.concat(ue(o.floating))),!_(o.reference)&&o.reference&&o.reference.contextElement&&(C=C.concat(ue(o.reference.contextElement)))),C=C.filter(E=>{var I;return E!==((I=v.defaultView)==null?void 0:I.visualViewport)}),C.forEach(E=>{E.addEventListener("scroll",P,{passive:!0})}),()=>{u&&(v.removeEventListener("keydown",D?W:L,D),v.removeEventListener("compositionstart",b),v.removeEventListener("compositionend",m)),T&&v.removeEventListener(l,O?$:N,O),C.forEach(E=>{E.removeEventListener("scroll",P)}),window.clearTimeout(y)}},[a,o,u,T,l,n,r,R,i,M,k,L,D,W,N,O,$]),s.useEffect(()=>{S.current=!1},[T,l]);const A=s.useMemo(()=>({onKeyDown:L,...p&&{[un[g]]:y=>{r(!1,y.nativeEvent,"reference-press")},...g!=="click"&&{onClick(y){r(!1,y.nativeEvent,"reference-press")}}}}),[L,r,p,g]),F=s.useMemo(()=>({onKeyDown:L,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[an[l]]:()=>{S.current=!0}}),[L,l]);return s.useMemo(()=>i?{reference:A,floating:F}:{},[i,A,F])}function cn(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=Re(),a=s.useRef({}),[i]=s.useState(()=>Zt()),u=ye()!=null,[f,l]=s.useState(r.reference),p=Y((d,h,c)=>{a.current.openEvent=d?h:void 0,i.emit("openchange",{open:d,event:h,reason:c,nested:u}),n==null||n(d,h,c)}),g=s.useMemo(()=>({setPositionReference:l}),[]),R=s.useMemo(()=>({reference:f||r.reference||null,floating:r.floating||null,domReference:r.reference}),[f,r.reference,r.floating]);return s.useMemo(()=>({dataRef:a,open:t,onOpenChange:p,elements:R,events:i,floatingId:o,refs:g}),[t,p,R,i,o,g])}function yn(e){e===void 0&&(e={});const{nodeId:t}=e,n=cn({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[a,i]=s.useState(null),[u,f]=s.useState(null),p=(o==null?void 0:o.domReference)||a,g=s.useRef(null),R=we();H(()=>{p&&(g.current=p)},[p]);const d=Yt({...e,elements:{...o,...u&&{reference:u}}}),h=s.useCallback(x=>{const M=_(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;f(M),d.refs.setReference(M)},[d.refs]),c=s.useCallback(x=>{(_(x)||x===null)&&(g.current=x,i(x)),(_(d.refs.reference.current)||d.refs.reference.current===null||x!==null&&!_(x))&&d.refs.setReference(x)},[d.refs]),w=s.useMemo(()=>({...d.refs,setReference:c,setPositionReference:h,domReference:g}),[d.refs,c,h]),T=s.useMemo(()=>({...d.elements,domReference:p}),[d.elements,p]),S=s.useMemo(()=>({...d,...r,refs:w,elements:T,nodeId:t}),[d,w,T,t,r]);return H(()=>{r.dataRef.current.floatingContext=S;const x=R==null?void 0:R.nodesRef.current.find(M=>M.id===t);x&&(x.context=S)}),s.useMemo(()=>({...d,context:S,refs:w,elements:T}),[d,w,T,S])}function wn(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:o,dataRef:a,elements:i}=e,{enabled:u=!0,visibleOnly:f=!0}=t,l=s.useRef(!1),p=s.useRef(),g=s.useRef(!0);s.useEffect(()=>{if(!u)return;const d=X(i.domReference);function h(){!n&&se(i.domReference)&&i.domReference===be(j(i.domReference))&&(l.current=!0)}function c(){g.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",c,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",c,!0)}},[i.domReference,n,u]),s.useEffect(()=>{if(!u)return;function d(h){let{reason:c}=h;(c==="reference-press"||c==="escape-key")&&(l.current=!0)}return o.on("openchange",d),()=>{o.off("openchange",d)}},[o,u]),s.useEffect(()=>()=>{clearTimeout(p.current)},[]);const R=s.useMemo(()=>({onPointerDown(d){Rt(d.nativeEvent)||(g.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=U(d.nativeEvent);if(f&&_(h))try{if(je()&&yt())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!g.current&&!Ue(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,c=d.nativeEvent,w=_(h)&&h.hasAttribute(Q("focus-guard"))&&h.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var T;const S=be(i.domReference?i.domReference.ownerDocument:document);!h&&S===i.domReference||q((T=a.current.floatingContext)==null?void 0:T.refs.floating.current,S)||q(i.domReference,S)||w||r(!1,c,"focus")})}}),[a,i.domReference,r,f]);return s.useMemo(()=>u?{reference:R}:{},[u,R])}const $e="active",Be="selected";function pe(e,t,n){const r=new Map,o=n==="item";let a=e;if(o&&e){const{[$e]:i,[Be]:u,...f}=e;a=f}return{...n==="floating"&&{tabIndex:-1,[sn]:""},...a,...t.map(i=>{const u=i?i[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((i,u)=>(u&&Object.entries(u).forEach(f=>{let[l,p]=f;if(!(o&&[$e,Be].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof p=="function"){var g;(g=r.get(l))==null||g.push(p),i[l]=function(){for(var R,d=arguments.length,h=new Array(d),c=0;c<d;c++)h[c]=arguments[c];return(R=r.get(l))==null?void 0:R.map(w=>w(...h)).find(w=>w!==void 0)}}}else i[l]=p}),i),{})}}function Cn(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),o=s.useCallback(u=>pe(u,e,"reference"),t),a=s.useCallback(u=>pe(u,e,"floating"),n),i=s.useCallback(u=>pe(u,e,"item"),r);return s.useMemo(()=>({getReferenceProps:o,getFloatingProps:a,getItemProps:i}),[o,a,i])}const ln=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function xn(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:o}=e,{enabled:a=!0,role:i="dialog"}=t,u=(n=ln.get(i))!=null?n:i,f=Re(),p=ye()!=null,g=s.useMemo(()=>u==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":u==="alertdialog"?"dialog":u,"aria-controls":r?o:void 0,...u==="listbox"&&{role:"combobox"},...u==="menu"&&{id:f},...u==="menu"&&p&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[u,o,p,r,f,i]),R=s.useMemo(()=>{const h={id:o,...u&&{role:u}};return u==="tooltip"||i==="label"?h:{...h,...u==="menu"&&{"aria-labelledby":f}}},[u,o,f,i]),d=s.useCallback(h=>{let{active:c,selected:w}=h;const T={role:"option",...c&&{id:o+"-option"}};switch(i){case"select":return{...T,"aria-selected":c&&w};case"combobox":return{...T,...c&&{"aria-selected":!0}}}return{}},[o,i]);return s.useMemo(()=>a?{reference:g,floating:R,item:d}:{},[a,g,R,d])}export{hn as F,yn as a,bn as b,wn as c,Rn as d,xn as e,gn as f,Cn as g,En as h,Re as i,vn as o,pn as s,mn as u};
