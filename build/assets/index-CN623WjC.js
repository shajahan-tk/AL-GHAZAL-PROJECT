import{r as t,j as s,c as N,z as fe,ak as Ce,al as pe}from"./index-CA7vLNFI.js";import{i as U}from"./isNil-C6Hksnuv.js";import{u as X}from"./useUniqueId-CHCEdNH2.js";import{A as ve}from"./index-B5bUWmwT.js";import{m as xe}from"./Views-DLdkzVCz.js";import{c as L}from"./useControllableState-CUoXx6vD.js";import{W as ie,X as ae,Y as he,G as be}from"./toString-C_n6VLVY.js";const ee=t.createContext(null),ge=ee.Provider;function ce(e){const n=t.useRef(null);return e||n}const q=t.createContext({}),le=q.Provider;q.Consumer;function ne(e){const[n,d]=t.useState(!1),[o,C]=t.useState([]),[i,c]=t.useState(null),r=t.useRef(null),p=t.useCallback((a,l)=>{C(b=>[...b,{element:a,props:l}])},[]),m=t.useCallback(a=>{C(l=>l.filter(b=>{var v;return((v=b==null?void 0:b.element)==null?void 0:v.id)!==a}))},[]),x=t.useCallback(()=>{requestAnimationFrame(()=>{var a;document.activeElement!==e.current&&(r.current=document.activeElement,(a=e.current)==null||a.focus())})},[e]),f=t.useCallback(a=>{const l=o.indexOf(a);l!==-1&&(c(l),x())},[o,x]),u=t.useCallback((a,l)=>{var b;for(let v=a;v>-1&&v<o.length;v+=l)if(!((b=o[v].props)!=null&&b.disabled))return v;return null},[o]),M=t.useCallback(a=>{if(U(a))c(null),x();else{let l;a===0?l=u(0,1):a===-1&&(l=u(o.length-1,-1)),U(l)||f(o[l])}},[o,f,x,u]),w=t.useCallback(()=>{d(!0),x()},[x]),y=t.useCallback(()=>{d(!1),c(null),requestAnimationFrame(()=>{var a;(a=r.current)==null||a.focus()})},[]);return{open:n,items:o,activeItemIndex:i,registerItem:p,unregisterItem:m,focusItemAt:M,openMenu:w,closeMenu:y}}const Q=t.forwardRef((e,n)=>{const{children:d,activeKey:o,onSelect:C,hidden:i,placement:c,menuClass:r,...p}=e,m=ce(n),x=X("menu-"),f=ne(m),u=a=>{const l=`rotateX(${a}deg)`;return c&&c.includes("center")?`${l} translateX(-50%)`:l},M={opacity:1,visibility:"visible",transform:u(0)},w={opacity:0,visibility:"hidden",transform:u(40)},y=w;return s.jsx(ge,{value:{activeKey:o,onSelect:C},children:s.jsx(le,{value:f,children:s.jsx(ve,{mode:"wait",children:!i&&s.jsx(xe.ul,{ref:m,id:x,initial:y,animate:M,exit:w,transition:{duration:.15,type:"tween"},className:r,...p,children:d})})})})});Q.displayName="DropdownInnerMenu";const V=t.createContext(null);V.Provider;V.Consumer;const Z=t.forwardRef((e,n)=>{const{asElement:d="div",children:o,className:C,disabled:i,eventKey:c,isActive:r,menuItemHeight:p=35,onSelect:m,style:x,variant:f="light",...u}=e,a=N("menu-item",`menu-item-${f}`,r&&"menu-item-active",i&&"menu-item-disabled",!i&&"menu-item-hoverable",C),l=b=>{m&&m(c,b)};return s.jsx(d,{ref:n,className:a,style:{height:`${p}px`,...x},onClick:l,...u,children:o})});Z.displayName="BaseMenuItem";const{DEFAULT:Me,DIVIDER:oe,HEADER:Y,CUSTOM:z}=Ce,te=t.forwardRef((e,n)=>{const{asElement:d="li",children:o,active:C,disabled:i,className:c,submenu:r,style:p,eventKey:m,onClick:x,onSelect:f,variant:u=Me,...M}=e,{mode:w,direction:y}=fe(),a=ce(n),l=X("menu-item-"),b=t.useRef(null),v=t.useContext(V),h=t.useContext(ee),_=t.useContext(q),g=ne(b),F=g.open,I=C||!U(h==null?void 0:h.activeKey)&&(h==null?void 0:h.activeKey)===m||!U(v==null?void 0:v.activeKey)&&(v==null?void 0:v.activeKey)===m,j=t.useCallback(()=>{r&&(g.openMenu(),g.focusItemAt(0))},[r,g]),O=t.useCallback(S=>{var $;f==null||f(m,S),($=h==null?void 0:h.onSelect)==null||$.call(h,m,S)},[m,f,h]),B=t.useCallback(S=>{i||(r?j():O(S))},[i,r,j,O]),E=t.useCallback(()=>{r&&g.openMenu()},[r,g]),R=t.useCallback(()=>{r&&g.closeMenu()},[r,g]),k={onClick:L(B,x)},{registerItem:A,unregisterItem:P}=_??{};if(r&&(k.onMouseOver=E,k.onMouseOut=R),t.useEffect(()=>(u!==oe&&u!==Y&&(A==null||A(a.current,{disabled:i})),()=>{P==null||P(l)}),[A,P,a,l,i,u]),u===oe||u===Y||u===z)return s.jsx(d,{ref:a,id:l,style:p,className:N(`menu-item-${u}`,c),...u===z?k:{},...M,children:(u===Y||u===z)&&o});function K(){return t.isValidElement(o)?t.cloneElement(o):o}function D(){return r?s.jsx(le,{value:g,children:t.cloneElement(r,{ref:b,hidden:!F})}):null}return r?s.jsxs("li",{...M,style:p,className:"relative",...k,children:[s.jsxs(Z,{ref:a,asElement:"div",id:l,isActive:I,eventKey:m,variant:w,className:N("dropdown-submenu-item",c),children:[s.jsx("span",{children:o}),y==="rtl"?s.jsx(ie,{}):s.jsx(ae,{})]}),D()]}):s.jsxs(Z,{ref:a,asElement:"li",style:p,isActive:I,disabled:i,eventKey:m,variant:w,className:c,...k,...M,children:[K(),D()]})});te.displayName="DropdownItem";const se=t.forwardRef((e,n)=>{const{eventKey:d,title:o,className:C,placement:i,...c}=e,r=t.useContext(ee),p="dropdown-menu",x=N(p,i,C),f=N(p,"dropdown-submenu"),u=s.jsx(Q,{ref:n,className:f,placement:i,...c});if(r){const M=N(C);return s.jsx(te,{className:M,submenu:u,eventKey:d,children:o})}return s.jsx(Q,{ref:n,className:x,placement:i,...c})});se.displayName="DropdownMenu";const we=({placement:e,children:n})=>e&&e.includes("middle-start")?s.jsxs(s.Fragment,{children:[n,s.jsx(ae,{})]}):e&&e.includes("middle-end")?s.jsxs(s.Fragment,{children:[s.jsx(ie,{}),n]}):e&&e.includes("top")?s.jsxs(s.Fragment,{children:[n,s.jsx(he,{})]}):s.jsxs(s.Fragment,{children:[n,s.jsx(be,{})]}),ue=t.forwardRef((e,n)=>{const{className:d,renderTitle:o,children:C,placement:i="bottom-start",disabled:c,toggleClassName:r,...p}=e,f=N("dropdown-toggle",d,r,c&&"dropdown-toggle-disabled"),u=N(f,"dropdown-toggle-default");return o?s.jsx("div",{className:f,...p,ref:n,children:o}):s.jsx("div",{ref:n,className:u,...p,children:s.jsx("span",{className:"flex items-center",children:s.jsx(we,{placement:i,children:C})})})});ue.displayName="DropdownToggle";const re=(e,n)=>{if(e.contains)return e.contains(n);if(e.compareDocumentPosition)return e===n||!!(e.compareDocumentPosition(n)&16);if(n)do if(n===e)return!0;while(n=n.parentNode);return!1},Ee=e=>e&&("current"in e?e.current:e);function G(e){const n=(e==null?void 0:e.root)||(e==null?void 0:e.child)||Ee(e);return n!=null&&n.nodeType&&typeof(n==null?void 0:n.nodeName)=="string",n}function ye(e){return(e==null?void 0:e.button)===0}function Ie(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e!=null&&e.shiftKey)}function Ne(e,n,d,o=!1){return e.addEventListener(n,d,o),{off(){e.removeEventListener(n,d,o)}}}function je(e,{disabled:n,triggerTarget:d,overlayTarget:o}){const C=t.useCallback(i=>{const c=G(d),r=G(o);c&&re(c,i.target)||r&&re(r,i.target)||Ie(i)||!ye(i)||e==null||e(i)},[e,d,o]);t.useEffect(()=>{const i=G(d);if(n||!i)return;const r=Ne(i&&i.ownerDocument||document,"mousedown",C,!0);return()=>{r==null||r.off()}},[d,n,e,C])}function J(e,n){return Array.isArray(n)?n.indexOf(e)>=0:e===n}const{BOTTOM_START:ke}=pe,De="click",Ae="hover",Pe="context",de=t.forwardRef((e,n)=>{const{title:d,children:o,menuClass:C,menuStyle:i,disabled:c,renderTitle:r,placement:p=ke,activeKey:m,toggleClassName:x,trigger:f="click",style:u,onClick:M,onMouseEnter:w,onMouseLeave:y,onContextMenu:a,onSelect:l,onOpen:b,onClose:v,onToggle:h,..._}=e,g=t.useRef(null),F=t.useRef(null),I=ne(g),j=I.open,O=X("dropdown-toggle-"),B=X("base-menu-"),E=t.useCallback(T=>{const H=typeof T>"u"?!j:T,W=H?b:v;W==null||W(),h==null||h(H),H?I.openMenu():I.closeMenu()},[v,b,h,j,I]),R=t.useCallback(T=>{T.preventDefault(),!c&&E()},[c,E]),k=t.useCallback(()=>{c||E(!0)},[c,E]),A=t.useCallback(()=>{c||E(!1)},[c,E]),P=(T,H)=>{l==null||l(T,H),E(!1)};je(()=>E(),{triggerTarget:F,overlayTarget:g,disabled:!j,listenEscape:!1});const K={onMouseEnter:w,onMouseLeave:y},D={onClick:M,onContextMenu:a};J(De,f)&&(D.onClick=L(R,D.onClick)),J(Pe,f)&&(D.onContextMenu=L(R,a)),J(Ae,f)&&(K.onMouseEnter=L(k,w),K.onMouseLeave=L(A,y));const S=s.jsx(ue,{..._,...D,ref:F,id:O,className:x,renderTitle:r,disabled:c,placement:p,children:d}),$=s.jsx(se,{ref:g,className:C,style:i,activeKey:m,hidden:!j,placement:p,id:B,onSelect:P,children:o});return s.jsx(V.Provider,{value:{activeKey:m},children:s.jsxs("div",{...K,ref:n,style:u,className:"dropdown",children:[S,s.jsx(q.Provider,{value:I,children:$})]})})});de.displayName="Dropdown";const me=de;me.Item=te;me.Menu=se;export{me as D,Z as M};
